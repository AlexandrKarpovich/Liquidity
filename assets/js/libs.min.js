!function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function(e){"use strict";function t(t){return!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=c),void 0!==t.click&&void 0===t.tap&&(t.tap=t.click),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each(function(){var k=e(this),A=k.data(P);A||(A=new function(t,k){function A(t){if(!(!0===Se.data(P+"_intouch")||e(t.target).closest(k.excludedElements,Se).length>0)){var s=t.originalEvent?t.originalEvent:t;if(!s.pointerType||"mouse"!=s.pointerType||0!=k.fallbackToMouseEvents){var a,c=s.touches,u=c?c[0]:s;return Le=m,c?Ce=c.length:!1!==k.preventDefaultEvents&&t.preventDefault(),pe=0,fe=null,ge=null,we=null,de=0,ve=0,ye=0,be=1,me=0,(l={})[n]=te(n),l[r]=te(r),l[o]=te(o),l[i]=te(i),Te=l,G(),Z(0,u),!c||Ce===k.fingers||k.fingers===y||B()?(Pe=ie(),2==Ce&&(Z(1,c[1]),ve=ye=re(Ee[0].start,Ee[1].start)),(k.swipeStatus||k.pinchStatus)&&(a=M(s,Le))):a=!1,!1===a?(M(s,Le=S),a):(k.hold&&(xe=setTimeout(e.proxy(function(){Se.trigger("hold",[s.target]),k.hold&&(a=k.hold.call(Se,s,s.target))},this),k.longTapThreshold)),Y(!0),null)}}var l}function I(t){var l,h,p,f,g=t.originalEvent?t.originalEvent:t;if(Le!==T&&Le!==S&&!K()){var b,m=g.touches,L=m?m[0]:g,C=$(L);if(ke=ie(),m&&(Ce=m.length),k.hold&&clearTimeout(xe),Le=w,2==Ce&&(0==ve?(Z(1,m[1]),ve=ye=re(Ee[0].start,Ee[1].start)):($(m[1]),ye=re(Ee[0].end,Ee[1].end),Ee[0].end,Ee[1].end,we=be<1?a:s),be=(ye/ve*1).toFixed(2),me=Math.abs(ve-ye)),Ce===k.fingers||k.fingers===y||!m||B()){if(fe=oe(C.start,C.end),ge=oe(C.last,C.end),function(e,t){if(!1!==k.preventDefaultEvents)if(k.allowPageScroll===c)e.preventDefault();else{var s=k.allowPageScroll===u;switch(t){case n:(k.swipeLeft&&s||!s&&k.allowPageScroll!=d)&&e.preventDefault();break;case r:(k.swipeRight&&s||!s&&k.allowPageScroll!=d)&&e.preventDefault();break;case o:(k.swipeUp&&s||!s&&k.allowPageScroll!=v)&&e.preventDefault();break;case i:(k.swipeDown&&s||!s&&k.allowPageScroll!=v)&&e.preventDefault()}}}(t,ge),p=C.start,f=C.end,pe=Math.round(Math.sqrt(Math.pow(f.x-p.x,2)+Math.pow(f.y-p.y,2))),de=ne(),function(e,t){e!=c&&(t=Math.max(t,ee(e)),Te[e].distance=t)}(fe,pe),b=M(g,Le),!k.triggerOnTouchEnd||k.triggerOnTouchLeave){var E=!0;if(k.triggerOnTouchLeave){var P={left:(h=(l=e(l=this)).offset()).left,right:h.left+l.outerWidth(),top:h.top,bottom:h.top+l.outerHeight()};E=function(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}(C.end,P)}!k.triggerOnTouchEnd&&E?Le=_(w):k.triggerOnTouchLeave&&!E&&(Le=_(T)),Le!=S&&Le!=T||M(g,Le)}}else M(g,Le=S);!1===b&&M(g,Le=S)}}function D(e){var t=e.originalEvent?e.originalEvent:e,n=t.touches;if(n){if(n.length&&!K())return function(e){Ae=ie(),Ie=e.touches.length+1}(t),!0;if(n.length&&K())return!0}return K()&&(Ce=Ie),ke=ie(),de=ne(),N()||!j()?M(t,Le=S):k.triggerOnTouchEnd||!1===k.triggerOnTouchEnd&&Le===w?(!1!==k.preventDefaultEvents&&e.preventDefault(),M(t,Le=T)):!k.triggerOnTouchEnd&&Q()?R(t,Le=T,p):Le===w&&M(t,Le=S),Y(!1),null}function H(){Ce=0,ke=0,Pe=0,ve=0,ye=0,be=1,G(),Y(!1)}function x(e){var t=e.originalEvent?e.originalEvent:e;k.triggerOnTouchLeave&&(Le=_(T),M(t,Le))}function O(){Se.unbind(ae,A),Se.unbind(he,H),Se.unbind(ce,I),Se.unbind(ue,D),le&&Se.unbind(le,x),Y(!1)}function _(e){var t=e,n=F(),r=j(),o=N();return!n||o?t=S:!r||e!=w||k.triggerOnTouchEnd&&!k.triggerOnTouchLeave?!r&&e==T&&k.triggerOnTouchLeave&&(t=S):t=T,t}function M(e,t){var n,r=e.touches;return(!(!U()||!q())||q())&&(n=R(e,t,l)),(!(!W()||!B())||B())&&!1!==n&&(n=R(e,t,h)),V()&&J()&&!1!==n?n=R(e,t,f):de>k.longTapThreshold&&pe<b&&k.longTap&&!1!==n?n=R(e,t,g):!(1!==Ce&&L||!(isNaN(pe)||pe<k.threshold)||!Q())&&!1!==n&&(n=R(e,t,p)),t===S&&H(),t===T&&(r&&r.length||H()),n}function R(t,c,u){var d;if(u==l){if(Se.trigger("swipeStatus",[c,fe||null,pe||0,de||0,Ce,Ee,ge]),k.swipeStatus&&!1===(d=k.swipeStatus.call(Se,t,c,fe||null,pe||0,de||0,Ce,Ee,ge)))return!1;if(c==T&&U()){if(clearTimeout(He),clearTimeout(xe),Se.trigger("swipe",[fe,pe,de,Ce,Ee,ge]),k.swipe&&!1===(d=k.swipe.call(Se,t,fe,pe,de,Ce,Ee,ge)))return!1;switch(fe){case n:Se.trigger("swipeLeft",[fe,pe,de,Ce,Ee,ge]),k.swipeLeft&&(d=k.swipeLeft.call(Se,t,fe,pe,de,Ce,Ee,ge));break;case r:Se.trigger("swipeRight",[fe,pe,de,Ce,Ee,ge]),k.swipeRight&&(d=k.swipeRight.call(Se,t,fe,pe,de,Ce,Ee,ge));break;case o:Se.trigger("swipeUp",[fe,pe,de,Ce,Ee,ge]),k.swipeUp&&(d=k.swipeUp.call(Se,t,fe,pe,de,Ce,Ee,ge));break;case i:Se.trigger("swipeDown",[fe,pe,de,Ce,Ee,ge]),k.swipeDown&&(d=k.swipeDown.call(Se,t,fe,pe,de,Ce,Ee,ge))}}}if(u==h){if(Se.trigger("pinchStatus",[c,we||null,me||0,de||0,Ce,be,Ee]),k.pinchStatus&&!1===(d=k.pinchStatus.call(Se,t,c,we||null,me||0,de||0,Ce,be,Ee)))return!1;if(c==T&&W())switch(we){case s:Se.trigger("pinchIn",[we||null,me||0,de||0,Ce,be,Ee]),k.pinchIn&&(d=k.pinchIn.call(Se,t,we||null,me||0,de||0,Ce,be,Ee));break;case a:Se.trigger("pinchOut",[we||null,me||0,de||0,Ce,be,Ee]),k.pinchOut&&(d=k.pinchOut.call(Se,t,we||null,me||0,de||0,Ce,be,Ee))}}return u==p?c!==S&&c!==T||(clearTimeout(He),clearTimeout(xe),J()&&!V()?(De=ie(),He=setTimeout(e.proxy(function(){De=null,Se.trigger("tap",[t.target]),k.tap&&(d=k.tap.call(Se,t,t.target))},this),k.doubleTapThreshold)):(De=null,Se.trigger("tap",[t.target]),k.tap&&(d=k.tap.call(Se,t,t.target)))):u==f?c!==S&&c!==T||(clearTimeout(He),clearTimeout(xe),De=null,Se.trigger("doubletap",[t.target]),k.doubleTap&&(d=k.doubleTap.call(Se,t,t.target))):u==g&&(c!==S&&c!==T||(clearTimeout(He),De=null,Se.trigger("longtap",[t.target]),k.longTap&&(d=k.longTap.call(Se,t,t.target)))),d}function j(){var e=!0;return null!==k.threshold&&(e=pe>=k.threshold),e}function N(){var e=!1;return null!==k.cancelThreshold&&null!==fe&&(e=ee(fe)-pe>=k.cancelThreshold),e}function F(){return!(k.maxTimeThreshold&&de>=k.maxTimeThreshold)}function W(){var e=z(),t=X(),n=null===k.pinchThreshold||me>=k.pinchThreshold;return e&&t&&n}function B(){return!!(k.pinchStatus||k.pinchIn||k.pinchOut)}function U(){var e=F(),t=j(),n=z(),r=X(),o=N(),i=!o&&r&&n&&t&&e;return i}function q(){return!!(k.swipe||k.swipeStatus||k.swipeLeft||k.swipeRight||k.swipeUp||k.swipeDown)}function z(){return Ce===k.fingers||k.fingers===y||!L}function X(){return 0!==Ee[0].end.x}function Q(){return!!k.tap}function J(){return!!k.doubleTap}function V(){if(null==De)return!1;var e=ie();return J()&&e-De<=k.doubleTapThreshold}function G(){Ae=0,Ie=0}function K(){var e=!1;if(Ae){var t=ie()-Ae;t<=k.fingerReleaseThreshold&&(e=!0)}return e}function Y(e){Se&&(!0===e?(Se.bind(ce,I),Se.bind(ue,D),le&&Se.bind(le,x)):(Se.unbind(ce,I,!1),Se.unbind(ue,D,!1),le&&Se.unbind(le,x,!1)),Se.data(P+"_intouch",!0===e))}function Z(e,t){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=t.pageX||t.clientX,n.start.y=n.last.y=n.end.y=t.pageY||t.clientY,Ee[e]=n,n}function $(e){var t=void 0!==e.identifier?e.identifier:0,n=function(e){return Ee[e]||null}(t);return null===n&&(n=Z(t,e)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function ee(e){if(Te[e])return Te[e].distance}function te(e){return{direction:e,distance:0}}function ne(){return ke-Pe}function re(e,t){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+r*r))}function oe(e,t){if(a=t,(s=e).x==a.x&&s.y==a.y)return c;var s,a,u=function(e,t){var n=e.x-t.x,r=t.y-e.y,o=Math.atan2(r,n),i=Math.round(180*o/Math.PI);return i<0&&(i=360-Math.abs(i)),i}(e,t);return u<=45&&u>=0?n:u<=360&&u>=315?n:u>=135&&u<=225?r:u>45&&u<135?i:o}function ie(){var e=new Date;return e.getTime()}var k=e.extend({},k),se=L||E||!k.fallbackToMouseEvents,ae=se?E?C?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ce=se?E?C?"MSPointerMove":"pointermove":"touchmove":"mousemove",ue=se?E?C?"MSPointerUp":"pointerup":"touchend":"mouseup",le=se?E?"mouseleave":null:"mouseleave",he=E?C?"MSPointerCancel":"pointercancel":"touchcancel",pe=0,fe=null,ge=null,de=0,ve=0,ye=0,be=1,me=0,we=0,Te=null,Se=e(t),Le="start",Ce=0,Ee={},Pe=0,ke=0,Ae=0,Ie=0,De=0,He=null,xe=null;try{Se.bind(ae,A),Se.bind(he,H)}catch(t){e.error("events not supported "+ae+","+he+" on jQuery.swipe")}this.enable=function(){return this.disable(),Se.bind(ae,A),Se.bind(he,H),Se},this.disable=function(){return O(),Se},this.destroy=function(){O(),Se.data(P,null),Se=null},this.option=function(t,n){if("object"==typeof t)k=e.extend(k,t);else if(void 0!==k[t]){if(void 0===n)return k[t];k[t]=n}else{if(!t)return k;e.error("Option "+t+" does not exist on jQuery.swipe.options")}return null}}(this,t),k.data(P,A))})}var n="left",r="right",o="up",i="down",s="in",a="out",c="none",u="auto",l="swipe",h="pinch",p="tap",f="doubletap",g="longtap",d="horizontal",v="vertical",y="all",b=10,m="start",w="move",T="end",S="cancel",L="ontouchstart"in window,C=window.navigator.msPointerEnabled&&!window.PointerEvent&&!L,E=(window.PointerEvent||window.navigator.msPointerEnabled)&&!L,P="TouchSwipe";e.fn.swipe=function(n){var r=e(this),o=r.data(P);if(o&&"string"==typeof n){if(o[n])return o[n].apply(o,Array.prototype.slice.call(arguments,1));e.error("Method "+n+" does not exist on jQuery.swipe")}else if(o&&"object"==typeof n)o.option.apply(o,arguments);else if(!(o||"object"!=typeof n&&n))return t.apply(this,arguments);return r},e.fn.swipe.version="1.6.18",e.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},e.fn.swipe.phases={PHASE_START:m,PHASE_MOVE:w,PHASE_END:T,PHASE_CANCEL:S},e.fn.swipe.directions={LEFT:n,RIGHT:r,UP:o,DOWN:i,IN:s,OUT:a},e.fn.swipe.pageScroll={NONE:c,HORIZONTAL:d,VERTICAL:v,AUTO:u},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:y}}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.svg4everybody=t()}):"object"==typeof module&&module.exports?module.exports=t():e.svg4everybody=t()}(this,function(){function e(e,t,n){if(n){var r=document.createDocumentFragment(),o=!t.hasAttribute("viewBox")&&n.getAttribute("viewBox");o&&t.setAttribute("viewBox",o);for(var i=n.cloneNode(!0);i.childNodes.length;)r.appendChild(i.firstChild);e.appendChild(r)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var n=t._cachedDocument;n||((n=t._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=t.responseText,t._cachedTarget={}),t._embeds.splice(0).map(function(r){var o=t._cachedTarget[r.id];o||(o=t._cachedTarget[r.id]=n.getElementById(r.id)),e(r.parent,r.svg,o)})}},t.onreadystatechange()}function n(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return function(r){var o,i=Object(r),s=window.top!==window.self;o="polyfill"in i?i.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&s;var a={},c=window.requestAnimationFrame||setTimeout,u=document.getElementsByTagName("use"),l=0;o&&function r(){for(var s=0;s<u.length;){var h=u[s],p=h.parentNode,f=n(p),g=h.getAttribute("xlink:href")||h.getAttribute("href");if(!g&&i.attributeName&&(g=h.getAttribute(i.attributeName)),f&&g){if(o)if(!i.validate||i.validate(g,f,h)){p.removeChild(h);var d=g.split("#"),v=d.shift(),y=d.join("#");if(v.length){var b=a[v];b||((b=a[v]=new XMLHttpRequest).open("GET",v),b.send(),b._embeds=[]),b._embeds.push({parent:p,svg:f,id:y}),t(b)}else e(p,f,document.getElementById(y))}else++s,++l}else++s}(!u.length||u.length-l>0)&&c(r,67)}()}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.signalR=t():e.signalR=t()}(self,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);var r=n(3);n.d(t,"VERSION",function(){return r.VERSION}),n.d(t,"AbortError",function(){return r.AbortError}),n.d(t,"HttpError",function(){return r.HttpError}),n.d(t,"TimeoutError",function(){return r.TimeoutError}),n.d(t,"HttpClient",function(){return r.HttpClient}),n.d(t,"HttpResponse",function(){return r.HttpResponse}),n.d(t,"DefaultHttpClient",function(){return r.DefaultHttpClient}),n.d(t,"HubConnection",function(){return r.HubConnection}),n.d(t,"HubConnectionState",function(){return r.HubConnectionState}),n.d(t,"HubConnectionBuilder",function(){return r.HubConnectionBuilder}),n.d(t,"MessageType",function(){return r.MessageType}),n.d(t,"LogLevel",function(){return r.LogLevel}),n.d(t,"HttpTransportType",function(){return r.HttpTransportType}),n.d(t,"TransferFormat",function(){return r.TransferFormat}),n.d(t,"NullLogger",function(){return r.NullLogger}),n.d(t,"JsonHubProtocol",function(){return r.JsonHubProtocol}),n.d(t,"Subject",function(){return r.Subject}),Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(e,t){return new Uint8Array(Array.prototype.slice.call(this,e,t))},writable:!0}),Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0})},function(e,t,n){(function(t){var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,s=void 0,a=function(e,t){g[o]=e,g[o+1]=t,2===(o+=2)&&(s?s(d):w())};var c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(d,1)}}var g=new Array(1e3);function d(){for(var e=0;e<o;e+=2){(0,g[e])(g[e+1]),g[e]=void 0,g[e+1]=void 0}o=0}var v,y,b,m,w=void 0;function T(e,t){var n=this,r=new this.constructor(C);void 0===r[L]&&B(r);var o=n._state;if(o){var i=arguments[o-1];a(function(){return F(o,r,i,n._result)})}else M(n,r,e,t);return r}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return H(t,e),t}h?w=function(){return process.nextTick(d)}:l?(y=0,b=new l(d),m=document.createTextNode(""),b.observe(m,{characterData:!0}),w=function(){m.data=y=++y%2}):p?((v=new MessageChannel).port1.onmessage=d,w=function(){return v.port2.postMessage(0)}):w=void 0===c?function(){try{var e=n(!function(){var e=new Error("Cannot find module 'vertx'");throw e.code="MODULE_NOT_FOUND",e}());return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(d)}:f()}catch(e){return f()}}():f();var L=Math.random().toString(36).substring(16);function C(){}var E=void 0,P=1,k=2,A=new j;function I(e){try{return e.then}catch(e){return A.error=e,A}}function D(t,n,r){n.constructor===t.constructor&&r===T&&n.constructor.resolve===S?function(e,t){t._state===P?O(e,t._result):t._state===k?_(e,t._result):M(t,void 0,function(t){return H(e,t)},function(t){return _(e,t)})}(t,n):r===A?(_(t,A.error),A.error=null):void 0===r?O(t,n):e(r)?function(e,t,n){a(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?H(e,n):O(e,n))},function(t){r||(r=!0,_(e,t))},e._label);!r&&o&&(r=!0,_(e,o))},e)}(t,n,r):O(t,n)}function H(e,t){var n,r;e===t?_(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?O(e,t):D(e,t,I(t)))}function x(e){e._onerror&&e._onerror(e._result),R(e)}function O(e,t){e._state===E&&(e._result=t,e._state=P,0!==e._subscribers.length&&a(R,e))}function _(e,t){e._state===E&&(e._state=k,e._result=t,a(x,e))}function M(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+P]=n,o[i+k]=r,0===i&&e._state&&a(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?F(n,r,o,i):o(i);e._subscribers.length=0}}function j(){this.error=null}var N=new j;function F(t,n,r,o){var i=e(r),s=void 0,a=void 0,c=void 0,u=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return N.error=e,N}}(r,o))===N?(u=!0,a=s.error,s.error=null):c=!0,n===s)return void _(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,c=!0;n._state!==E||(i&&c?H(n,s):u?_(n,a):t===P?O(n,s):t===k&&_(n,s))}var W=0;function B(e){e[L]=W++,e._state=void 0,e._result=void 0,e._subscribers=[]}var U=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[L]||B(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&O(this.promise,this._result))):_(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===E&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===S){var o=I(e);if(o===T&&e._state!==E)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===q){var i=new n(C);D(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===E&&(this._remaining--,e===k?_(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;M(e,void 0,function(e){return n._settledAt(P,t,e)},function(e){return n._settledAt(k,t,e)})},e}();var q=function(){function e(t){this[L]=W++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){H(e,t)},function(t){_(e,t)})}catch(t){_(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return q.prototype.then=T,q.all=function(e){return new U(this,e).promise},q.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},q.resolve=S,q.reject=function(e){var t=new this(C);return _(t,e),t},q._setScheduler=function(e){s=e},q._setAsap=function(e){a=e},q._asap=a,q.polyfill=function(){var e=void 0;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}e.Promise=q},q.Promise=q,q.polyfill(),q},e.exports=r()}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"VERSION",function(){return g});var r=n(4);n.d(t,"AbortError",function(){return r.AbortError}),n.d(t,"HttpError",function(){return r.HttpError}),n.d(t,"TimeoutError",function(){return r.TimeoutError});var o=n(5);n.d(t,"HttpClient",function(){return o.HttpClient}),n.d(t,"HttpResponse",function(){return o.HttpResponse});var i=n(6);n.d(t,"DefaultHttpClient",function(){return i.DefaultHttpClient});var s=n(10);n.d(t,"HubConnection",function(){return s.HubConnection}),n.d(t,"HubConnectionState",function(){return s.HubConnectionState});var a=n(17);n.d(t,"HubConnectionBuilder",function(){return a.HubConnectionBuilder});var c=n(15);n.d(t,"MessageType",function(){return c.MessageType});var u=n(9);n.d(t,"LogLevel",function(){return u.LogLevel});var l=n(20);n.d(t,"HttpTransportType",function(){return l.HttpTransportType}),n.d(t,"TransferFormat",function(){return l.TransferFormat});var h=n(14);n.d(t,"NullLogger",function(){return h.NullLogger});var p=n(25);n.d(t,"JsonHubProtocol",function(){return p.JsonHubProtocol});var f=n(16);n.d(t,"Subject",function(){return f.Subject});var g="3.1.3"},function(e,t,n){"use strict";n.r(t),n.d(t,"HttpError",function(){return i}),n.d(t,"TimeoutError",function(){return s}),n.d(t,"AbortError",function(){return a});var r,o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(t,n){var r=this,o=this.constructor.prototype;return(r=e.call(this,t)||this).statusCode=n,r.__proto__=o,r}return o(t,e),t}(Error),s=function(e){function t(t){var n=this.constructor;void 0===t&&(t="A timeout occurred.");var r=this,o=n.prototype;return(r=e.call(this,t)||this).__proto__=o,r}return o(t,e),t}(Error),a=function(e){function t(t){var n=this.constructor;void 0===t&&(t="An abort occurred.");var r=this,o=n.prototype;return(r=e.call(this,t)||this).__proto__=o,r}return o(t,e),t}(Error)},function(e,t,n){"use strict";n.r(t),n.d(t,"HttpResponse",function(){return o}),n.d(t,"HttpClient",function(){return i});var r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=function(){return function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}(),i=function(){function e(){}return e.prototype.get=function(e,t){return this.send(r({},t,{method:"GET",url:e}))},e.prototype.post=function(e,t){return this.send(r({},t,{method:"POST",url:e}))},e.prototype.delete=function(e,t){return this.send(r({},t,{method:"DELETE",url:e}))},e.prototype.getCookieString=function(e){return""},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"DefaultHttpClient",function(){return u});var r,o=n(4),i=n(5),s=n(7),a=n(8),c=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this)||this;return"undefined"!=typeof XMLHttpRequest?n.httpClient=new a.XhrHttpClient(t):n.httpClient=new s.NodeHttpClient(t),n}return c(t,e),t.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new o.AbortError):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},t}(i.HttpClient)},function(e,t,n){"use strict";n.r(t),n.d(t,"NodeHttpClient",function(){return s});var r,o=n(5),i=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){return e.call(this)||this}return i(t,e),t.prototype.send=function(){return Promise.reject(new Error("If using Node either provide an XmlHttpRequest polyfill or consume the cjs or esm script instead of the browser/signalr.js one."))},t}(o.HttpClient)},function(e,t,n){"use strict";n.r(t),n.d(t,"XhrHttpClient",function(){return c});var r,o=n(4),i=n(5),s=n(9),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){var n=e.call(this)||this;return n.logger=t,n}return a(t,e),t.prototype.send=function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new o.AbortError):e.method?e.url?new Promise(function(n,r){var a=new XMLHttpRequest;a.open(e.method,e.url,!0),a.withCredentials=!0,a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var c=e.headers;c&&Object.keys(c).forEach(function(e){a.setRequestHeader(e,c[e])}),e.responseType&&(a.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){a.abort(),r(new o.AbortError)}),e.timeout&&(a.timeout=e.timeout),a.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),a.status>=200&&a.status<300?n(new i.HttpResponse(a.status,a.statusText,a.response||a.responseText)):r(new o.HttpError(a.statusText,a.status))},a.onerror=function(){t.logger.log(s.LogLevel.Warning,"Error from HTTP request. "+a.status+": "+a.statusText+"."),r(new o.HttpError(a.statusText,a.status))},a.ontimeout=function(){t.logger.log(s.LogLevel.Warning,"Timeout from HTTP request."),r(new o.TimeoutError)},a.send(e.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(i.HttpClient)},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"LogLevel",function(){return r}),function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(r||(r={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"HubConnectionState",function(){return r}),n.d(t,"HubConnection",function(){return f});var r,o=n(11),i=n(15),s=n(9),a=n(16),c=n(13),u=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},l=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},h=3e4,p=15e3;!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(r||(r={}));var f=function(){function e(e,t,n,s){var a=this;c.Arg.isRequired(e,"connection"),c.Arg.isRequired(t,"logger"),c.Arg.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=h,this.keepAliveIntervalInMilliseconds=p,this.logger=t,this.protocol=n,this.connection=e,this.reconnectPolicy=s,this.handshakeProtocol=new o.HandshakeProtocol,this.connection.onreceive=function(e){return a.processIncomingData(e)},this.connection.onclose=function(e){return a.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.reconnectingCallbacks=[],this.reconnectedCallbacks=[],this.invocationId=0,this.receivedHandshakeResponse=!1,this.connectionState=r.Disconnected,this.connectionStarted=!1,this.cachedPingMessage=this.protocol.writeMessage({type:i.MessageType.Ping})}return e.create=function(t,n,r,o){return new e(t,n,r,o)},Object.defineProperty(e.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectionId",{get:function(){return this.connection&&this.connection.connectionId||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this.connection.baseUrl||""},set:function(e){if(this.connectionState!==r.Disconnected&&this.connectionState!==r.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e},enumerable:!0,configurable:!0}),e.prototype.start=function(){return this.startPromise=this.startWithStateTransitions(),this.startPromise},e.prototype.startWithStateTransitions=function(){return u(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:if(this.connectionState!==r.Disconnected)return[2,Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."))];this.connectionState=r.Connecting,this.logger.log(s.LogLevel.Debug,"Starting HubConnection."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startInternal()];case 2:return t.sent(),this.connectionState=r.Connected,this.connectionStarted=!0,this.logger.log(s.LogLevel.Debug,"HubConnection connected successfully."),[3,4];case 3:return e=t.sent(),this.connectionState=r.Disconnected,this.logger.log(s.LogLevel.Debug,"HubConnection failed to start successfully because of error '"+e+"'."),[2,Promise.reject(e)];case 4:return[2]}})})},e.prototype.startInternal=function(){return u(this,void 0,void 0,function(){var e,t,n,r=this;return l(this,function(o){switch(o.label){case 0:return this.stopDuringStartError=void 0,this.receivedHandshakeResponse=!1,e=new Promise(function(e,t){r.handshakeResolver=e,r.handshakeRejecter=t}),[4,this.connection.start(this.protocol.transferFormat)];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,7]),t={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(s.LogLevel.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(t))];case 3:return o.sent(),this.logger.log(s.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,e];case 4:if(o.sent(),this.stopDuringStartError)throw this.stopDuringStartError;return[3,7];case 5:return n=o.sent(),this.logger.log(s.LogLevel.Debug,"Hub handshake failed with error '"+n+"' during start(). Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),[4,this.connection.stop(n)];case 6:throw o.sent(),n;case 7:return[2]}})})},e.prototype.stop=function(){return u(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return e=this.startPromise,this.stopPromise=this.stopInternal(),[4,this.stopPromise];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e];case 3:return t.sent(),[3,5];case 4:return t.sent(),[3,5];case 5:return[2]}})})},e.prototype.stopInternal=function(e){return this.connectionState===r.Disconnected?(this.logger.log(s.LogLevel.Debug,"Call to HubConnection.stop("+e+") ignored because it is already in the disconnected state."),Promise.resolve()):this.connectionState===r.Disconnecting?(this.logger.log(s.LogLevel.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),this.stopPromise):(this.connectionState=r.Disconnecting,this.logger.log(s.LogLevel.Debug,"Stopping HubConnection."),this.reconnectDelayHandle?(this.logger.log(s.LogLevel.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.reconnectDelayHandle),this.reconnectDelayHandle=void 0,this.completeClose(),Promise.resolve()):(this.cleanupTimeout(),this.cleanupPingTimer(),this.stopDuringStartError=e||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))},e.prototype.stream=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o,s=this.replaceStreamingParams(n),c=s[0],u=s[1],l=this.createStreamInvocation(e,n,u),h=new a.Subject;return h.cancelCallback=function(){var e=t.createCancelInvocation(l.invocationId);return delete t.callbacks[l.invocationId],o.then(function(){return t.sendWithProtocol(e)})},this.callbacks[l.invocationId]=function(e,t){t?h.error(t):e&&(e.type===i.MessageType.Completion?e.error?h.error(new Error(e.error)):h.complete():h.next(e.item))},o=this.sendWithProtocol(l).catch(function(e){h.error(e),delete t.callbacks[l.invocationId]}),this.launchStreams(c,o),h},e.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},e.prototype.sendWithProtocol=function(e){return this.sendMessage(this.protocol.writeMessage(e))},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.replaceStreamingParams(t),o=r[0],i=r[1],s=this.sendWithProtocol(this.createInvocation(e,t,!0,i));return this.launchStreams(o,s),s},e.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.replaceStreamingParams(n),s=o[0],a=o[1],c=this.createInvocation(e,n,!1,a);return new Promise(function(e,n){t.callbacks[c.invocationId]=function(t,r){r?n(r):t&&(t.type===i.MessageType.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: "+t.type)))};var r=t.sendWithProtocol(c).catch(function(e){n(e),delete t.callbacks[c.invocationId]});t.launchStreams(s,r)})},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},e.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.onreconnecting=function(e){e&&this.reconnectingCallbacks.push(e)},e.prototype.onreconnected=function(e){e&&this.reconnectedCallbacks.push(e)},e.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var r=n[t];switch(r.type){case i.MessageType.Invocation:this.invokeClientMethod(r);break;case i.MessageType.StreamItem:case i.MessageType.Completion:var o=this.callbacks[r.invocationId];o&&(r.type===i.MessageType.Completion&&delete this.callbacks[r.invocationId],o(r));break;case i.MessageType.Ping:break;case i.MessageType.Close:this.logger.log(s.LogLevel.Information,"Close message received from server.");var a=r.error?new Error("Server returned an error on close: "+r.error):void 0;!0===r.allowReconnect?this.connection.stop(a):this.stopPromise=this.stopInternal(a);break;default:this.logger.log(s.LogLevel.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},e.prototype.processHandshakeResponse=function(e){var t,n,r;try{r=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(e){var o="Error parsing handshake response: "+e;this.logger.log(s.LogLevel.Error,o);var i=new Error(o);throw this.handshakeRejecter(i),i}if(n.error){o="Server returned handshake error: "+n.error;this.logger.log(s.LogLevel.Error,o);i=new Error(o);throw this.handshakeRejecter(i),i}return this.logger.log(s.LogLevel.Debug,"Server handshake complete."),this.handshakeResolver(),r},e.prototype.resetKeepAliveInterval=function(){var e=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout(function(){return u(e,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:if(this.connectionState!==r.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}})})},this.keepAliveIntervalInMilliseconds)},e.prototype.resetTimeoutPeriod=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return e.serverTimeout()},this.serverTimeoutInMilliseconds))},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods[e.target.toLowerCase()];if(n){try{n.forEach(function(n){return n.apply(t,e.arguments)})}catch(t){this.logger.log(s.LogLevel.Error,"A callback for the method "+e.target.toLowerCase()+" threw error '"+t+"'.")}if(e.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(s.LogLevel.Error,r),this.stopPromise=this.stopInternal(new Error(r))}}else this.logger.log(s.LogLevel.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){this.logger.log(s.LogLevel.Debug,"HubConnection.connectionClosed("+e+") called while in state "+this.connectionState+"."),this.stopDuringStartError=this.stopDuringStartError||e||new Error("The underlying connection was closed before the hub handshake could complete."),this.handshakeResolver&&this.handshakeResolver(),this.cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this.cleanupTimeout(),this.cleanupPingTimer(),this.connectionState===r.Disconnecting?this.completeClose(e):this.connectionState===r.Connected&&this.reconnectPolicy?this.reconnect(e):this.connectionState===r.Connected&&this.completeClose(e)},e.prototype.completeClose=function(e){var t=this;if(this.connectionStarted){this.connectionState=r.Disconnected,this.connectionStarted=!1;try{this.closedCallbacks.forEach(function(n){return n.apply(t,[e])})}catch(t){this.logger.log(s.LogLevel.Error,"An onclose callback called with error '"+e+"' threw error '"+t+"'.")}}},e.prototype.reconnect=function(e){return u(this,void 0,void 0,function(){var t,n,o,i,a,c=this;return l(this,function(u){switch(u.label){case 0:if(t=Date.now(),n=0,o=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),null===(i=this.getNextRetryDelay(n++,0,o)))return this.logger.log(s.LogLevel.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this.completeClose(e),[2];if(this.connectionState=r.Reconnecting,e?this.logger.log(s.LogLevel.Information,"Connection reconnecting because of error '"+e+"'."):this.logger.log(s.LogLevel.Information,"Connection reconnecting."),this.onreconnecting){try{this.reconnectingCallbacks.forEach(function(t){return t.apply(c,[e])})}catch(t){this.logger.log(s.LogLevel.Error,"An onreconnecting callback called with error '"+e+"' threw error '"+t+"'.")}if(this.connectionState!==r.Reconnecting)return this.logger.log(s.LogLevel.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),[2]}u.label=1;case 1:return null===i?[3,7]:(this.logger.log(s.LogLevel.Information,"Reconnect attempt number "+n+" will start in "+i+" ms."),[4,new Promise(function(e){c.reconnectDelayHandle=setTimeout(e,i)})]);case 2:if(u.sent(),this.reconnectDelayHandle=void 0,this.connectionState!==r.Reconnecting)return this.logger.log(s.LogLevel.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),[2];u.label=3;case 3:return u.trys.push([3,5,,6]),[4,this.startInternal()];case 4:if(u.sent(),this.connectionState=r.Connected,this.logger.log(s.LogLevel.Information,"HubConnection reconnected successfully."),this.onreconnected)try{this.reconnectedCallbacks.forEach(function(e){return e.apply(c,[c.connection.connectionId])})}catch(e){this.logger.log(s.LogLevel.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+e+"'.")}return[2];case 5:return a=u.sent(),this.logger.log(s.LogLevel.Information,"Reconnect attempt failed because of error '"+a+"'."),this.connectionState!==r.Reconnecting?(this.logger.log(s.LogLevel.Debug,"Connection left the reconnecting state during reconnect attempt. Done reconnecting."),[2]):(o=a instanceof Error?a:new Error(a.toString()),i=this.getNextRetryDelay(n++,Date.now()-t,o),[3,6]);case 6:return[3,1];case 7:return this.logger.log(s.LogLevel.Information,"Reconnect retries have been exhausted after "+(Date.now()-t)+" ms and "+n+" failed attempts. Connection disconnecting."),this.completeClose(),[2]}})})},e.prototype.getNextRetryDelay=function(e,t,n){try{return this.reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this.logger.log(s.LogLevel.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+e+", "+t+") threw error '"+n+"'."),null}},e.prototype.cancelCallbacksWithError=function(e){var t=this.callbacks;this.callbacks={},Object.keys(t).forEach(function(n){(0,t[n])(null,e)})},e.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},e.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},e.prototype.createInvocation=function(e,t,n,r){if(n)return{arguments:t,streamIds:r,target:e,type:i.MessageType.Invocation};var o=this.invocationId;return this.invocationId++,{arguments:t,invocationId:o.toString(),streamIds:r,target:e,type:i.MessageType.Invocation}},e.prototype.launchStreams=function(e,t){var n=this;if(0!==e.length){t||(t=Promise.resolve());var r=function(r){e[r].subscribe({complete:function(){t=t.then(function(){return n.sendWithProtocol(n.createCompletionMessage(r))})},error:function(e){var o;o=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then(function(){return n.sendWithProtocol(n.createCompletionMessage(r,o))})},next:function(e){t=t.then(function(){return n.sendWithProtocol(n.createStreamItemMessage(r,e))})}})};for(var o in e)r(o)}},e.prototype.replaceStreamingParams=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r];if(this.isObservable(o)){var i=this.invocationId;this.invocationId++,t[i]=o,n.push(i.toString()),e.splice(r,1)}}return[t,n]},e.prototype.isObservable=function(e){return e&&e.subscribe&&"function"==typeof e.subscribe},e.prototype.createStreamInvocation=function(e,t,n){var r=this.invocationId;return this.invocationId++,{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:i.MessageType.StreamInvocation}},e.prototype.createCancelInvocation=function(e){return{invocationId:e,type:i.MessageType.CancelInvocation}},e.prototype.createStreamItemMessage=function(e,t){return{invocationId:e,item:t,type:i.MessageType.StreamItem}},e.prototype.createCompletionMessage=function(e,t,n){return t?{error:t,invocationId:e,type:i.MessageType.Completion}:{invocationId:e,result:n,type:i.MessageType.Completion}},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"HandshakeProtocol",function(){return i});var r=n(12),o=n(13),i=function(){function e(){}return e.prototype.writeHandshakeRequest=function(e){return r.TextMessageFormat.write(JSON.stringify(e))},e.prototype.parseHandshakeResponse=function(e){var t,n;if(Object(o.isArrayBuffer)(e)||"undefined"!=typeof Buffer&&e instanceof Buffer){var i=new Uint8Array(e);if(-1===(a=i.indexOf(r.TextMessageFormat.RecordSeparatorCode)))throw new Error("Message is incomplete.");var s=a+1;t=String.fromCharCode.apply(null,i.slice(0,s)),n=i.byteLength>s?i.slice(s).buffer:null}else{var a,c=e;if(-1===(a=c.indexOf(r.TextMessageFormat.RecordSeparator)))throw new Error("Message is incomplete.");s=a+1;t=c.substring(0,s),n=c.length>s?c.substring(s):null}var u=r.TextMessageFormat.parse(t),l=JSON.parse(u[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[n,l]},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"TextMessageFormat",function(){return r});var r=function(){function e(){}return e.write=function(t){return""+t+e.RecordSeparator},e.parse=function(t){if(t[t.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n},e.RecordSeparatorCode=30,e.RecordSeparator=String.fromCharCode(e.RecordSeparatorCode),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"Arg",function(){return a}),n.d(t,"Platform",function(){return c}),n.d(t,"getDataDetail",function(){return u}),n.d(t,"formatArrayBuffer",function(){return l}),n.d(t,"isArrayBuffer",function(){return h}),n.d(t,"sendMessage",function(){return p}),n.d(t,"createLogger",function(){return f}),n.d(t,"SubjectSubscription",function(){return g}),n.d(t,"ConsoleLogger",function(){return d});var r=n(9),o=n(14),i=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},s=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=function(){function e(){}return e.isRequired=function(e,t){if(null===e||void 0===e)throw new Error("The '"+t+"' argument is required.")},e.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},e}(),c=function(){function e(){}return Object.defineProperty(e,"isBrowser",{get:function(){return"object"==typeof window},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebWorker",{get:function(){return"object"==typeof self&&"importScripts"in self},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isNode",{get:function(){return!this.isBrowser&&!this.isWebWorker},enumerable:!0,configurable:!0}),e}();function u(e,t){var n="";return h(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+l(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function l(e){var t="";return new Uint8Array(e).forEach(function(e){t+="0x"+(e<16?"0":"")+e.toString(16)+" "}),t.substr(0,t.length-1)}function h(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function p(e,t,n,o,a,c,l){return i(this,void 0,void 0,function(){var i,p,f,g,d;return s(this,function(s){switch(s.label){case 0:return a?[4,a()]:[3,2];case 1:(f=s.sent())&&((i={}).Authorization="Bearer "+f,p=i),s.label=2;case 2:return e.log(r.LogLevel.Trace,"("+t+" transport) sending data. "+u(c,l)+"."),g=h(c)?"arraybuffer":"text",[4,n.post(o,{content:c,headers:p,responseType:g})];case 3:return d=s.sent(),e.log(r.LogLevel.Trace,"("+t+" transport) request complete. Response status: "+d.statusCode+"."),[2]}})})}function f(e){return void 0===e?new d(r.LogLevel.Information):null===e?o.NullLogger.instance:e.log?e:new d(e)}var g=function(){function e(e,t){this.subject=e,this.observer=t}return e.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);e>-1&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch(function(e){})},e}(),d=function(){function e(e){this.minimumLogLevel=e,this.outputConsole=console}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case r.LogLevel.Critical:case r.LogLevel.Error:this.outputConsole.error("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t);break;case r.LogLevel.Warning:this.outputConsole.warn("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t);break;case r.LogLevel.Information:this.outputConsole.info("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t);break;default:this.outputConsole.log("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t)}},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"NullLogger",function(){return r});var r=function(){function e(){}return e.prototype.log=function(e,t){},e.instance=new e,e}()},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"MessageType",function(){return r}),function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close"}(r||(r={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Subject",function(){return o});var r=n(13),o=function(){function e(){this.observers=[]}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++){n[t].next(e)}},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){return this.observers.push(e),new r.SubjectSubscription(this,e)},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"HubConnectionBuilder",function(){return p});var r=n(18),o=n(19),i=n(10),s=n(9),a=n(25),c=n(14),u=n(13),l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h={trace:s.LogLevel.Trace,debug:s.LogLevel.Debug,info:s.LogLevel.Information,information:s.LogLevel.Information,warn:s.LogLevel.Warning,warning:s.LogLevel.Warning,error:s.LogLevel.Error,critical:s.LogLevel.Critical,none:s.LogLevel.None};var p=function(){function e(){}return e.prototype.configureLogging=function(e){if(u.Arg.isRequired(e,"logging"),void 0!==e.log)this.logger=e;else if("string"==typeof e){var t=function(e){var t=h[e.toLowerCase()];if(void 0!==t)return t;throw new Error("Unknown log level: "+e)}(e);this.logger=new u.ConsoleLogger(t)}else this.logger=new u.ConsoleLogger(e);return this},e.prototype.withUrl=function(e,t){return u.Arg.isRequired(e,"url"),this.url=e,this.httpConnectionOptions=l({},this.httpConnectionOptions,"object"==typeof t?t:{transport:t}),this},e.prototype.withHubProtocol=function(e){return u.Arg.isRequired(e,"protocol"),this.protocol=e,this},e.prototype.withAutomaticReconnect=function(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new r.DefaultReconnectPolicy(e):this.reconnectPolicy=e:this.reconnectPolicy=new r.DefaultReconnectPolicy,this},e.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new o.HttpConnection(this.url,e);return i.HubConnection.create(t,this.logger||c.NullLogger.instance,this.protocol||new a.JsonHubProtocol,this.reconnectPolicy)},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"DefaultReconnectPolicy",function(){return o});var r=[0,2e3,1e4,3e4,null],o=function(){function e(e){this.retryDelays=void 0!==e?e.concat([null]):r}return e.prototype.nextRetryDelayInMilliseconds=function(e){return this.retryDelays[e.previousRetryCount]},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"HttpConnection",function(){return d}),n.d(t,"TransportSendQueue",function(){return v});var r=n(6),o=n(9),i=n(20),s=n(21),a=n(23),c=n(13),u=n(24),l=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},h=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},p=null,f=null;if(c.Platform.isNode){var g=require;p=g("ws"),f=g("eventsource")}var d=function(){function e(e,t){void 0===t&&(t={}),this.features={},this.negotiateVersion=1,c.Arg.isRequired(e,"url"),this.logger=Object(c.createLogger)(t.logger),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent||!1,c.Platform.isNode||"undefined"==typeof WebSocket||t.WebSocket?c.Platform.isNode&&!t.WebSocket&&p&&(t.WebSocket=p):t.WebSocket=WebSocket,c.Platform.isNode||"undefined"==typeof EventSource||t.EventSource?c.Platform.isNode&&!t.EventSource&&void 0!==f&&(t.EventSource=f):t.EventSource=EventSource,this.httpClient=t.httpClient||new r.DefaultHttpClient(this.logger),this.connectionState="Disconnected",this.connectionStarted=!1,this.options=t,this.onreceive=null,this.onclose=null}return e.prototype.start=function(e){return l(this,void 0,void 0,function(){var t;return h(this,function(n){switch(n.label){case 0:return e=e||i.TransferFormat.Binary,c.Arg.isIn(e,i.TransferFormat,"transferFormat"),this.logger.log(o.LogLevel.Debug,"Starting connection with transfer format '"+i.TransferFormat[e]+"'."),"Disconnected"!==this.connectionState?[2,Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."))]:(this.connectionState="Connecting ",this.startInternalPromise=this.startInternal(e),[4,this.startInternalPromise]);case 1:return n.sent(),"Disconnecting"!==this.connectionState?[3,3]:(t="Failed to start the HttpConnection before stop() was called.",this.logger.log(o.LogLevel.Error,t),[4,this.stopPromise]);case 2:return n.sent(),[2,Promise.reject(new Error(t))];case 3:if("Connected"!==this.connectionState)return t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this.logger.log(o.LogLevel.Error,t),[2,Promise.reject(new Error(t))];n.label=4;case 4:return this.connectionStarted=!0,[2]}})})},e.prototype.send=function(e){return"Connected"!==this.connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.sendQueue||(this.sendQueue=new v(this.transport)),this.sendQueue.send(e))},e.prototype.stop=function(e){return l(this,void 0,void 0,function(){var t=this;return h(this,function(n){switch(n.label){case 0:return"Disconnected"===this.connectionState?(this.logger.log(o.LogLevel.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnected state."),[2,Promise.resolve()]):"Disconnecting"===this.connectionState?(this.logger.log(o.LogLevel.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),[2,this.stopPromise]):(this.connectionState="Disconnecting",this.stopPromise=new Promise(function(e){t.stopPromiseResolver=e}),[4,this.stopInternal(e)]);case 1:return n.sent(),[4,this.stopPromise];case 2:return n.sent(),[2]}})})},e.prototype.stopInternal=function(e){return l(this,void 0,void 0,function(){var t,n;return h(this,function(r){switch(r.label){case 0:this.stopError=e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.startInternalPromise];case 2:return r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:if(!this.sendQueue)return[3,9];r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.sendQueue.stop()];case 6:return r.sent(),[3,8];case 7:return t=r.sent(),this.logger.log(o.LogLevel.Error,"TransportSendQueue.stop() threw error '"+t+"'."),[3,8];case 8:this.sendQueue=void 0,r.label=9;case 9:if(!this.transport)return[3,14];r.label=10;case 10:return r.trys.push([10,12,,13]),[4,this.transport.stop()];case 11:return r.sent(),[3,13];case 12:return n=r.sent(),this.logger.log(o.LogLevel.Error,"HttpConnection.transport.stop() threw error '"+n+"'."),this.stopConnection(),[3,13];case 13:return this.transport=void 0,[3,15];case 14:this.logger.log(o.LogLevel.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed."),this.stopConnection(),r.label=15;case 15:return[2]}})})},e.prototype.startInternal=function(e){return l(this,void 0,void 0,function(){var t,n,r,a,c,u;return h(this,function(l){switch(l.label){case 0:t=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,l.label=1;case 1:return l.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==i.HttpTransportType.WebSockets?[3,3]:(this.transport=this.constructTransport(i.HttpTransportType.WebSockets),[4,this.startTransport(t,e)]):[3,5];case 2:return l.sent(),[3,4];case 3:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,r=0,a=function(){var e;return h(this,function(o){switch(o.label){case 0:return[4,c.getNegotiationResponse(t)];case 1:if(n=o.sent(),"Disconnecting"===c.connectionState||"Disconnected"===c.connectionState)throw new Error("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(t=n.url),n.accessToken&&(e=n.accessToken,c.accessTokenFactory=function(){return e}),r++,[2]}})},c=this,l.label=6;case 6:return[5,a()];case 7:l.sent(),l.label=8;case 8:if(n.url&&r<100)return[3,6];l.label=9;case 9:if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(t,this.options.transport,n,e)];case 10:l.sent(),l.label=11;case 11:return this.transport instanceof s.LongPollingTransport&&(this.features.inherentKeepAlive=!0),"Connecting "===this.connectionState&&(this.logger.log(o.LogLevel.Debug,"The HttpConnection connected successfully."),this.connectionState="Connected"),[3,13];case 12:return u=l.sent(),this.logger.log(o.LogLevel.Error,"Failed to start the connection: "+u),this.connectionState="Disconnected",this.transport=void 0,[2,Promise.reject(u)];case 13:return[2]}})})},e.prototype.getNegotiationResponse=function(e){return l(this,void 0,void 0,function(){var t,n,r,i,s,a,c;return h(this,function(u){switch(u.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(r=u.sent())&&((t={}).Authorization="Bearer "+r,n=t),u.label=2;case 2:i=this.resolveNegotiateUrl(e),this.logger.log(o.LogLevel.Debug,"Sending negotiation request: "+i+"."),u.label=3;case 3:return u.trys.push([3,5,,6]),[4,this.httpClient.post(i,{content:"",headers:n})];case 4:return 200!==(s=u.sent()).statusCode?[2,Promise.reject(new Error("Unexpected status code returned from negotiate "+s.statusCode))]:((!(a=JSON.parse(s.content)).negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),[2,a]);case 5:return c=u.sent(),this.logger.log(o.LogLevel.Error,"Failed to complete negotiation with the server: "+c),[2,Promise.reject(c)];case 6:return[2]}})})},e.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},e.prototype.createTransport=function(e,t,n,r){return l(this,void 0,void 0,function(){var i,s,a,c,u,l,p,f,g,d,v;return h(this,function(h){switch(h.label){case 0:return i=this.createConnectUrl(e,n.connectionToken),this.isITransport(t)?(this.logger.log(o.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.startTransport(i,r)]):[3,2];case 1:return h.sent(),this.connectionId=n.connectionId,[2];case 2:s=[],a=n.availableTransports||[],c=n,u=0,l=a,h.label=3;case 3:return u<l.length?(p=l[u],(f=this.resolveTransportOrError(p,t,r))instanceof Error?(s.push(p.transport+" failed: "+f),[3,12]):[3,4]):[3,13];case 4:if(!this.isITransport(f))return[3,12];if(this.transport=f,c)return[3,9];h.label=5;case 5:return h.trys.push([5,7,,8]),[4,this.getNegotiationResponse(e)];case 6:return c=h.sent(),[3,8];case 7:return g=h.sent(),[2,Promise.reject(g)];case 8:i=this.createConnectUrl(e,c.connectionToken),h.label=9;case 9:return h.trys.push([9,11,,12]),[4,this.startTransport(i,r)];case 10:return h.sent(),this.connectionId=c.connectionId,[2];case 11:return d=h.sent(),this.logger.log(o.LogLevel.Error,"Failed to start the transport '"+p.transport+"': "+d),c=void 0,s.push(p.transport+" failed: "+d),"Connecting "!==this.connectionState?(v="Failed to select transport before stop() was called.",this.logger.log(o.LogLevel.Debug,v),[2,Promise.reject(new Error(v))]):[3,12];case 12:return u++,[3,3];case 13:return s.length>0?[2,Promise.reject(new Error("Unable to connect to the server with any of the available transports. "+s.join(" ")))]:[2,Promise.reject(new Error("None of the transports supported by the client are supported by the server."))]}})})},e.prototype.constructTransport=function(e){switch(e){case i.HttpTransportType.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new u.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case i.HttpTransportType.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new a.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case i.HttpTransportType.LongPolling:return new s.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+e+".")}},e.prototype.startTransport=function(e,t){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return n.stopConnection(e)},this.transport.connect(e,t)},e.prototype.resolveTransportOrError=function(e,t,n){var r=i.HttpTransportType[e.transport];if(null===r||void 0===r)return this.logger.log(o.LogLevel.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+e.transport+"' because it is not supported by this client.");if(!function(e,t){return!e||0!=(t&e)}(t,r))return this.logger.log(o.LogLevel.Debug,"Skipping transport '"+i.HttpTransportType[r]+"' because it was disabled by the client."),new Error("'"+i.HttpTransportType[r]+"' is disabled by the client.");if(!(e.transferFormats.map(function(e){return i.TransferFormat[e]}).indexOf(n)>=0))return this.logger.log(o.LogLevel.Debug,"Skipping transport '"+i.HttpTransportType[r]+"' because it does not support the requested transfer format '"+i.TransferFormat[n]+"'."),new Error("'"+i.HttpTransportType[r]+"' does not support "+i.TransferFormat[n]+".");if(r===i.HttpTransportType.WebSockets&&!this.options.WebSocket||r===i.HttpTransportType.ServerSentEvents&&!this.options.EventSource)return this.logger.log(o.LogLevel.Debug,"Skipping transport '"+i.HttpTransportType[r]+"' because it is not supported in your environment.'"),new Error("'"+i.HttpTransportType[r]+"' is not supported in your environment.");this.logger.log(o.LogLevel.Debug,"Selecting transport '"+i.HttpTransportType[r]+"'.");try{return this.constructTransport(r)}catch(e){return e}},e.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},e.prototype.stopConnection=function(e){if(this.logger.log(o.LogLevel.Debug,"HttpConnection.stopConnection("+e+") called while in state "+this.connectionState+"."),this.transport=void 0,e=this.stopError||e,this.stopError=void 0,"Disconnected"!==this.connectionState)if("Connecting "!==this.connectionState){if("Disconnecting"===this.connectionState&&this.stopPromiseResolver(),e?this.logger.log(o.LogLevel.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(o.LogLevel.Information,"Connection disconnected."),this.connectionId=void 0,this.connectionState="Disconnected",this.onclose&&this.connectionStarted){this.connectionStarted=!1;try{this.onclose(e)}catch(t){this.logger.log(o.LogLevel.Error,"HttpConnection.onclose("+e+") threw error '"+t+"'.")}}}else this.logger.log(o.LogLevel.Warning,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection hasn't yet left the in the connecting state.");else this.logger.log(o.LogLevel.Debug,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection is already in the disconnected state.")},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!c.Platform.isBrowser||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(o.LogLevel.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===t?"":e.substring(t)).indexOf("negotiateVersion")&&(n+=-1===t?"?":"&",n+="negotiateVersion="+this.negotiateVersion),n},e}();var v=function(){function e(e){this.transport=e,this.buffer=[],this.executing=!0,this.sendBufferedData=new y,this.transportResult=new y,this.sendLoopPromise=this.sendLoop()}return e.prototype.send=function(e){return this.bufferData(e),this.transportResult||(this.transportResult=new y),this.transportResult.promise},e.prototype.stop=function(){return this.executing=!1,this.sendBufferedData.resolve(),this.sendLoopPromise},e.prototype.bufferData=function(e){if(this.buffer.length&&typeof this.buffer[0]!=typeof e)throw new Error("Expected data to be of type "+typeof this.buffer+" but was of type "+typeof e);this.buffer.push(e),this.sendBufferedData.resolve()},e.prototype.sendLoop=function(){return l(this,void 0,void 0,function(){var t,n,r;return h(this,function(o){switch(o.label){case 0:return[4,this.sendBufferedData.promise];case 1:if(o.sent(),!this.executing)return this.transportResult&&this.transportResult.reject("Connection stopped."),[3,6];this.sendBufferedData=new y,t=this.transportResult,this.transportResult=void 0,n="string"==typeof this.buffer[0]?this.buffer.join(""):e.concatBuffers(this.buffer),this.buffer.length=0,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.transport.send(n)];case 3:return o.sent(),t.resolve(),[3,5];case 4:return r=o.sent(),t.reject(r),[3,5];case 5:return[3,0];case 6:return[2]}})})},e.concatBuffers=function(e){for(var t=e.map(function(e){return e.byteLength}).reduce(function(e,t){return e+t}),n=new Uint8Array(t),r=0,o=0,i=e;o<i.length;o++){var s=i[o];n.set(new Uint8Array(s),r),r+=s.byteLength}return n},e}(),y=function(){function e(){var e=this;this.promise=new Promise(function(t,n){var r;return r=[t,n],e.resolver=r[0],e.rejecter=r[1],r})}return e.prototype.resolve=function(){this.resolver()},e.prototype.reject=function(e){this.rejecter(e)},e}()},function(e,t,n){"use strict";var r,o;n.r(t),n.d(t,"HttpTransportType",function(){return r}),n.d(t,"TransferFormat",function(){return o}),function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(r||(r={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(o||(o={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"LongPollingTransport",function(){return l});var r=n(22),o=n(4),i=n(9),s=n(20),a=n(13),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},u=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=function(){function e(e,t,n,o){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new r.AbortController,this.logMessageContent=o,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(e.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),e.prototype.connect=function(e,t){return c(this,void 0,void 0,function(){var n,r,c,l;return u(this,function(u){switch(u.label){case 0:if(a.Arg.isRequired(e,"url"),a.Arg.isRequired(t,"transferFormat"),a.Arg.isIn(t,s.TransferFormat,"transferFormat"),this.url=e,this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Connecting."),t===s.TransferFormat.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return n={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},t===s.TransferFormat.Binary&&(n.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return r=u.sent(),this.updateHeaderToken(n,r),c=e+"&_="+Date.now(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) polling: "+c+"."),[4,this.httpClient.get(c,n)];case 2:return 200!==(l=u.sent()).statusCode?(this.logger.log(i.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+l.statusCode+"."),this.closeError=new o.HttpError(l.statusText||"",l.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,n),[2]}})})},e.prototype.getAccessToken=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}})})},e.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},e.prototype.poll=function(e,t){return c(this,void 0,void 0,function(){var n,r,s,c;return u(this,function(u){switch(u.label){case 0:u.trys.push([0,,8,9]),u.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=u.sent(),this.updateHeaderToken(t,n),u.label=3;case 3:return u.trys.push([3,5,,6]),r=e+"&_="+Date.now(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,t)];case 4:return 204===(s=u.sent()).statusCode?(this.logger.log(i.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==s.statusCode?(this.logger.log(i.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+s.statusCode+"."),this.closeError=new o.HttpError(s.statusText||"",s.statusCode),this.running=!1):s.content?(this.logger.log(i.LogLevel.Trace,"(LongPolling transport) data received. "+Object(a.getDataDetail)(s.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(s.content)):this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return c=u.sent(),this.running?c instanceof o.TimeoutError?this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=c,this.running=!1):this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+c.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}})})},e.prototype.send=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return this.running?[2,Object(a.sendMessage)(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},e.prototype.stop=function(){return c(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),n.label=1;case 1:return n.trys.push([1,,5,6]),[4,this.receiving];case 2:return n.sent(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),e={headers:{}},[4,this.getAccessToken()];case 3:return t=n.sent(),this.updateHeaderToken(e,t),[4,this.httpClient.delete(this.url,e)];case 4:return n.sent(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}})})},e.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(i.LogLevel.Trace,e),this.onclose(this.closeError)}},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"AbortController",function(){return r});var r=function(){function e(){this.isAborted=!1,this.onabort=null}return e.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(e.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"ServerSentEventsTransport",function(){return c});var r=n(9),o=n(20),i=n(13),s=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=function(){function e(e,t,n,r,o){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=r,this.eventSourceConstructor=o,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return s(this,void 0,void 0,function(){var n,s=this;return a(this,function(a){switch(a.label){case 0:return i.Arg.isRequired(e,"url"),i.Arg.isRequired(t,"transferFormat"),i.Arg.isIn(t,o.TransferFormat,"transferFormat"),this.logger.log(r.LogLevel.Trace,"(SSE transport) Connecting."),this.url=e,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=a.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),a.label=2;case 2:return[2,new Promise(function(n,a){var c=!1;if(t===o.TransferFormat.Text){var u;if(i.Platform.isBrowser||i.Platform.isWebWorker)u=new s.eventSourceConstructor(e,{withCredentials:!0});else{var l=s.httpClient.getCookieString(e);u=new s.eventSourceConstructor(e,{withCredentials:!0,headers:{Cookie:l}})}try{u.onmessage=function(e){if(s.onreceive)try{s.logger.log(r.LogLevel.Trace,"(SSE transport) data received. "+Object(i.getDataDetail)(e.data,s.logMessageContent)+"."),s.onreceive(e.data)}catch(e){return void s.close(e)}},u.onerror=function(e){var t=new Error(e.data||"Error occurred");c?s.close(t):a(t)},u.onopen=function(){s.logger.log(r.LogLevel.Information,"SSE connected to "+s.url),s.eventSource=u,c=!0,n()}}catch(e){return void a(e)}}else a(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})]}})})},e.prototype.send=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){return this.eventSource?[2,Object(i.sendMessage)(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},e.prototype.stop=function(){return this.close(),Promise.resolve()},e.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"WebSocketTransport",function(){return c});var r=n(9),o=n(20),i=n(13),s=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=function(){function e(e,t,n,r,o){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=r,this.webSocketConstructor=o,this.httpClient=e,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return s(this,void 0,void 0,function(){var n,s=this;return a(this,function(a){switch(a.label){case 0:return i.Arg.isRequired(e,"url"),i.Arg.isRequired(t,"transferFormat"),i.Arg.isIn(t,o.TransferFormat,"transferFormat"),this.logger.log(r.LogLevel.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=a.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),a.label=2;case 2:return[2,new Promise(function(n,a){var c;e=e.replace(/^http/,"ws");var u=s.httpClient.getCookieString(e),l=!1;i.Platform.isNode&&u&&(c=new s.webSocketConstructor(e,void 0,{headers:{Cookie:""+u}})),c||(c=new s.webSocketConstructor(e)),t===o.TransferFormat.Binary&&(c.binaryType="arraybuffer"),c.onopen=function(t){s.logger.log(r.LogLevel.Information,"WebSocket connected to "+e+"."),s.webSocket=c,l=!0,n()},c.onerror=function(e){var t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:new Error("There was an error with the transport."),a(t)},c.onmessage=function(e){s.logger.log(r.LogLevel.Trace,"(WebSockets transport) data received. "+Object(i.getDataDetail)(e.data,s.logMessageContent)+"."),s.onreceive&&s.onreceive(e.data)},c.onclose=function(e){if(l)s.close(e);else{var t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:new Error("There was an error with the transport."),a(t)}}})]}})})},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(r.LogLevel.Trace,"(WebSockets transport) sending data. "+Object(i.getDataDetail)(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0,this.close(void 0)),Promise.resolve()},e.prototype.close=function(e){this.logger.log(r.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!e||!1!==e.wasClean&&1e3===e.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"JsonHubProtocol",function(){return u});var r=n(15),o=n(9),i=n(20),s=n(14),a=n(12),c="json",u=function(){function e(){this.name=c,this.version=1,this.transferFormat=i.TransferFormat.Text}return e.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=s.NullLogger.instance);for(var n=[],i=0,c=a.TextMessageFormat.parse(e);i<c.length;i++){var u=c[i],l=JSON.parse(u);if("number"!=typeof l.type)throw new Error("Invalid payload.");switch(l.type){case r.MessageType.Invocation:this.isInvocationMessage(l);break;case r.MessageType.StreamItem:this.isStreamItemMessage(l);break;case r.MessageType.Completion:this.isCompletionMessage(l);break;case r.MessageType.Ping:case r.MessageType.Close:break;default:t.log(o.LogLevel.Information,"Unknown message type '"+l.type+"' ignored.");continue}n.push(l)}return n},e.prototype.writeMessage=function(e){return a.TextMessageFormat.write(JSON.stringify(e))},e.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},e.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},e.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},e.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},e}()}])}),self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise(function(n,r){var o=new XMLHttpRequest,i=[],s=[],a={},c=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var u in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){i.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+","+n:n}),n(c())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(u,t.headers[u]);o.send(t.body||null)})}),function(e,t){"use strict";function n(n,r,i,a,c){function u(){L=e.devicePixelRatio>1,i=l(i),r.delay>=0&&setTimeout(function(){h(!0)},r.delay),(r.delay<0||r.combined)&&(a.e=function(e,t){var o,i=0;return function(s,a){function c(){i=+new Date,t.call(n,s)}var u=+new Date-i;o&&clearTimeout(o),u>e||!r.enableThrottle||a?c():o=setTimeout(c,e-u)}}(r.throttle,function(e){"resize"===e.type&&(T=S=-1),h(e.all)}),a.a=function(e){e=l(e),i.push.apply(i,e)},a.g=function(){return i=o(i).filter(function(){return!o(this).data(r.loadedName)})},a.f=function(e){for(var t=0;t<e.length;t++){var n=i.filter(function(){return this===e[t]});n.length&&h(!1,n)}},h(),o(r.appendScroll).on("scroll."+c+" resize."+c,a.e))}function l(e){for(var i=r.defaultImage,s=r.placeholder,a=r.imageBase,c=r.srcsetAttribute,u=r.loaderAttribute,l=r._f||{},h=0,p=(e=o(e).filter(function(){var e=o(this),n=v(this);return!e.data(r.handledName)&&(e.attr(r.attribute)||e.attr(c)||e.attr(u)||l[n]!==t)}).data("plugin_"+r.name,n)).length;h<p;h++){var f=o(e[h]),g=v(e[h]),d=f.attr(r.imageBaseAttribute)||a;g===k&&d&&f.attr(c)&&f.attr(c,y(f.attr(c),d)),l[g]===t||f.attr(u)||f.attr(u,l[g]),g===k&&i&&!f.attr(A)?f.attr(A,i):g===k||!s||f.css(H)&&"none"!==f.css(H)||f.css(H,"url('"+s+"')")}return e}function h(e,t){if(i.length){for(var s=t||i,a=!1,c=r.imageBase||"",u=r.srcsetAttribute,l=r.handledName,h=0;h<s.length;h++)if(e||t||f(s[h])){var g=o(s[h]),d=v(s[h]),y=g.attr(r.attribute),b=g.attr(r.imageBaseAttribute)||c,m=g.attr(r.loaderAttribute);g.data(l)||r.visibleOnly&&!g.is(":visible")||!((y||g.attr(u))&&(d===k&&(b+y!==g.attr(A)||g.attr(u)!==g.attr(I))||d!==k&&b+y!==g.css(H))||m)||(a=!0,g.data(l,!0),p(g,d,b,m))}a&&(i=o(i).filter(function(){return!o(this).data(l)}))}else r.autoDestroy&&n.destroy()}function p(e,t,n,i){++w;var s=function(){m("onError",e),b(),s=o.noop};m("beforeLoad",e);var a=r.attribute,c=r.srcsetAttribute,u=r.sizesAttribute,l=r.retinaAttribute,h=r.removeAttribute,p=r.loadedName,f=e.attr(l);if(i){var g=function(){h&&e.removeAttr(r.loaderAttribute),e.data(p,!0),m(C,e),setTimeout(b,1),g=o.noop};e.off(P).one(P,s).one(E,g),m(i,e,function(t){t?(e.off(E),g()):(e.off(P),s())})||e.trigger(P)}else{var d=o(new Image);d.one(P,s).one(E,function(){e.hide(),t===k?e.attr(D,d.attr(D)).attr(I,d.attr(I)).attr(A,d.attr(A)):e.css(H,"url('"+d.attr(A)+"')"),e[r.effect](r.effectTime),h&&(e.removeAttr(a+" "+c+" "+l+" "+r.imageBaseAttribute),u!==D&&e.removeAttr(u)),e.data(p,!0),m(C,e),d.remove(),b()});var v=(L&&f?f:e.attr(a))||"";d.attr(D,e.attr(u)).attr(I,e.attr(c)).attr(A,v?n+v:null),d.complete&&d.trigger(E)}}function f(e){var t=e.getBoundingClientRect(),n=r.scrollDirection,o=r.threshold,i=d()+o>t.top&&-o<t.bottom,s=g()+o>t.left&&-o<t.right;return"vertical"===n?i:"horizontal"===n?s:i&&s}function g(){return T>=0?T:T=o(e).width()}function d(){return S>=0?S:S=o(e).height()}function v(e){return e.tagName.toLowerCase()}function y(e,t){if(t){var n=e.split(",");e="";for(var r=0,o=n.length;r<o;r++)e+=t+n[r].trim()+(r!==o-1?",":"")}return e}function b(){--w,i.length||w||m("onFinishedAll")}function m(e,t,o){return!!(e=r[e])&&(e.apply(n,[].slice.call(arguments,1)),!0)}var w=0,T=-1,S=-1,L=!1,C="afterLoad",E="load",P="error",k="img",A="src",I="srcset",D="sizes",H="background-image";"event"===r.bind||s?u():o(e).on(E+"."+c,u)}function r(r,s){var a=this,c=o.extend({},a.config,s),u={},l=c.name+"-"+ ++i;return a.config=function(e,n){return n===t?c[e]:(c[e]=n,a)},a.addItems=function(e){return u.a&&u.a("string"===o.type(e)?o(e):e),a},a.getItems=function(){return u.g?u.g():{}},a.update=function(e){return u.e&&u.e({},!e),a},a.force=function(e){return u.f&&u.f("string"===o.type(e)?o(e):e),a},a.loadAll=function(){return u.e&&u.e({all:!0},!0),a},a.destroy=function(){return o(c.appendScroll).off("."+l,u.e),o(e).off("."+l),u={},t},n(a,c,r,u,l),c.chainable?r:a}var o=e.jQuery||e.Zepto,i=0,s=!1;o.fn.Lazy=o.fn.lazy=function(e){return new r(this,e)},o.Lazy=o.lazy=function(e,n,i){if(o.isFunction(n)&&(i=n,n=[]),o.isFunction(i)){e=o.isArray(e)?e:[e],n=o.isArray(n)?n:[n];for(var s=r.prototype.config,a=s._f||(s._f={}),c=0,u=e.length;c<u;c++)(s[e[c]]===t||o.isFunction(s[e[c]]))&&(s[e[c]]=i);for(var l=0,h=n.length;l<h;l++)a[n[l]]=e[0]}},r.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:e,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:t,afterLoad:t,onError:t,onFinishedAll:t},o(e).on("load",function(){s=!0})}(window);