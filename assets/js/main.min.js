let didScroll,utmParamQueryString="",utm_source=getRefQueryParam("utm_source"),utm_medium=getRefQueryParam("utm_medium"),utm_content=getRefQueryParam("utm_content"),utm_campaign=getRefQueryParam("utm_campaign"),utm_term=getRefQueryParam("utm_term"),header=document.querySelector("header"),$header=$("header"),lastScrollTop=0,delta=5,navbarHeight=$header.outerHeight(),multiItemSlider=function(e){if(!document.querySelector(e))return!1;let t=function(e){let t=document.querySelector("#slid"+e);if(!t)return!1;t.parentElement.style.transform="translateX("+-t.offsetLeft+"px)"};$(".slider__control").on("click",function(e){e.preventDefault(),t($(e.currentTarget).data("step"))}),$(".slider__item").swipe({swipeRight:function(e){e.preventDefault(),t($(e.currentTarget).find(".container__points-active").data("step")-1)},swipeLeft:function(e){e.preventDefault(),t($(e.currentTarget).find(".container__points-active").data("step")+1)},threshold:0})};function scroll(){header&&(window.pageYOffset>2?header.classList.remove("is-transparent"):header.classList.add("is-transparent"))}function getRefQueryParam(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function popupToggle(e){e.preventDefault();let t=document.getElementById(e.currentTarget.getAttribute("data-popup"));t.style.display="block"===t.style.display?"none":"block",e.preventDefault()}function burgerMenu(e){let t=document.querySelector(e);t&&t.querySelector(".header__burger-link, .header__burger-button").addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("burger_menu-active"),t.classList.contains("burger_menu-active")?document.querySelector("body").style.overflow="hidden":document.querySelector("body").style.overflow="visible"})}function openTable(e,t){let a,r,n,i,s;for(i=e.currentTarget.parentNode,r=(s=e.currentTarget.parentNode.parentNode).querySelectorAll(".container__table"),a=0;a<r.length;a++)r[a].style.display="none";for(n=i.querySelectorAll("button"),a=0;a<n.length;a++)n[a].className=n[a].className.replace(" button_active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" button_active",e.preventDefault()}function hasScrolled(){let e=$(this).scrollTop();Math.abs(lastScrollTop-e)<=delta||(e>lastScrollTop&&e>navbarHeight?$header.removeClass("nav-down").addClass("nav-up"):e+$(window).height()<$(document).height()&&$header.removeClass("nav-up").addClass("nav-down"),lastScrollTop=e)}let bckgImages=document.querySelectorAll(".advantages__image");for(let e=0;e<bckgImages.length;++e)bckgImages[e].style.backgroundImage||(bckgImages[e].style.display="none");if(utm_source&&(utmParamQueryString+="&utm_source="+utm_source),utm_medium&&(utmParamQueryString+="&utm_medium="+utm_medium),utm_content&&(utmParamQueryString+="&utm_content="+utm_content),utm_campaign&&(utmParamQueryString+="&utm_campaign="+utm_campaign),utm_term&&(utmParamQueryString+="&utm_term="+utm_term),utmParamQueryString.length>0&&(utmParamQueryString=utmParamQueryString.substring(1)),utmParamQueryString){let e=document.querySelectorAll("a");for(let t=0;t<e.length;++t)-1===e[t].href.indexOf(window.location.hostname)&&(-1===e[t].href.indexOf("?")?e[t].href+="?":e[t].href+="&",e[t].href+=utmParamQueryString)}multiItemSlider(".slider-1"),multiItemSlider(".slider-2"),multiItemSlider(".slider-3"),multiItemSlider(".advantages__slider-1"),multiItemSlider(".advantages__slider-2"),multiItemSlider(".advantages__slider-3"),window.onscroll=function(){scroll()},$(window).scroll(function(e){didScroll=!0}),setInterval(function(){didScroll&&(hasScrolled(),didScroll=!1)},150),$(document).ready(function(){if(marketModule.connect(marketsConfig),marketModule.makeTable(),(window.innerWidth>0?window.innerWidth:screen.width)>1024)$(".dropdown").hover(function(){$(this).find(".drop").next().stop().slideDown("slow")},function(){$(this).find(".drop").next().stop().slideUp("slow")});else{$(".dropdown-mobile").on("click",function(){"none"===$(this).next().css("display")?($(".dropdown__content").hide(),$(this).next().stop().slideDown("slow")):($(".dropdown__content").hide(),$(this).next().stop().slideUp("slow"))})}let e=document.querySelectorAll(".popup, .popup__container-close_btn");for(let t=0;t<e.length;++t)e[t].addEventListener("click",function(e){popupToggle(e)})}),jQuery(document).ready(function(){function e(){var e=jQuery(window).scrollTop(),t=100/(jQuery("html").height()-window.innerHeight)*e;jQuery(".progress-line").css("width",t+"%"),jQuery(window).scrollTop()>0||window.innerWidth<1450?jQuery("header").addClass("scroll"):jQuery("header").removeClass("scroll")}function t(){jQuery(".goanim").length>0&&jQuery(".goanim").each(function(){jQuery(window).scrollTop()+window.innerHeight/1.5>jQuery(this).offset().top&&jQuery(window).scrollTop()-window.innerHeight/3<jQuery(this).offset().top?jQuery(this).removeClass("goanim"):jQuery(this).hasClass("footan")&&jQuery(window).scrollTop()+window.innerHeight>jQuery("body").height()-100&&jQuery(this).removeClass("goanim")})}setTimeout(function(){jQuery(".preloader").fadeOut(300)},3e3),e(),jQuery(window).on("resize",function(){e()}),jQuery(window).on("scroll",function(){e(),t()}),jQuery(document).on("click",".brgr",function(){jQuery("header").toggleClass("active"),jQuery(".overlay").toggleClass("active")}),jQuery(document).on("click","header nav span",function(){jQuery(this).parent().toggleClass("active")}),jQuery(document).on("click",".js-anchor > a, a.js-anchor",function(e){e.preventDefault();var t=jQuery(this).attr("href");if(jQuery(t).offset()){var a=jQuery(t).offset().top;window.innerWidth>768&&(a-=77),jQuery("html,body").animate({scrollTop:a},300)}}),setTimeout(function(){t()},3e3),jQuery(document).on("focus",".mailform label input",function(){jQuery(this).parent().addClass("active"),jQuery(this).parent().removeClass("error")}),jQuery(document).on("blur",".mailform label input",function(){var e;""==jQuery(this).val()?(jQuery(this).parent().removeClass("active"),jQuery(this).parent().addClass("error")):(jQuery(this).parent().removeClass("error"),"email"!=jQuery(this).attr("type")||(e=jQuery(this).val(),new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e))||jQuery(this).parent().addClass("error"))}),jQuery(document).on("submit",".mailform",function(e){if(e.preventDefault(),jQuery(this).find("input").each(function(){""==jQuery(this).val()&&jQuery(this).parent().addClass("error")}),0==jQuery(this).find(".error").length){var t=jQuery(this).serialize();jQuery(this).find(".done").addClass("active"),jQuery.ajax({type:"POST",url:"/mail.php",data:t,success:function(e){console.log(e)}})}}),jQuery(document).on("click",".mailform .done",function(e){jQuery(this).removeClass("active"),jQuery(this).closest(".mailform").find("label").removeClass("active").find("input").val("")})}),marketsConfig.sortTabs=["USD","EUR","USDⓈ","GBP"];let marketModule={data:[],$wrap:jQuery(".b2bx-markets"),conn:null,conversion:{},instruments:{},markets:[],market:marketsConfig.defaults.market,groups:{},last:{},table:{},instrument:{},tab:0,connect:function(e){let t=this;if(0===this.$wrap.length)return!1;this.conn=(new signalR.HubConnectionBuilder).withUrl(e.stagingUrl+e.infoUrl).withAutomaticReconnect().configureLogging(signalR.LogLevel.Information).build(),this.conn.start().then(function(){fetch(e.stagingUrl+e.frontOfficeUrl).then(function(e){return e.json()}).then(function(a){let r=a.pairs;fetch(e.stagingUrl+e.frontOfficeAssetsUrl).then(function(e){return e.json()}).then(function(e){let a=e.data;jQuery(".b2bx-table-thead-loading").hide(),t.addRows(r,a),t.makeTabs(r),t.addTopWidgetRows(),t.hideEmptyMarkets()}),jQuery.each(r,function(a,r){t.conn.stream("Book",a).subscribe({next:function(e){if(e.asks[e.asks.length-1]&&e.bids[e.bids.length-1]){let a=jQuery('[data-pair="'+e.instrument+'"]').parents("tr"),r=[],n=[];if(jQuery.each(e.bids,function(e,t){r.push(t.price)}),jQuery.each(e.asks,function(e,t){n.push(t.price)}),a.data("bids")||a.data("asks")){let e=a.data("bids").split(","),t=a.data("asks").split(",");e.sort(),t.sort(),e.splice(0,r.length),t.splice(t.length-n.length-1,n.length),r=e.concat(r),n=t.concat(n),a.attr("data-bids",r.join()),a.attr("data-asks",n.join())}else r.sort(),n.sort(),a.attr("data-bids",r.join()),a.attr("data-asks",n.join());let i=Math.max.apply(null,r),s=Math.min.apply(null,n),o=Math.abs(s-i);t.liveRenewBookSpread(e.instrument,o)}},complete:function(){console.log("streaming complete"),t.conn.stop()},error:function(e){console.log(e)}}),t.conn.stream("Trades",a).subscribe({next:function(a){let r;a[a.length-1]&&(r=a[a.length-1].executionPrice),a[a.length-1]&&(t.liveRenewBookPrice(a[a.length-1].instrument,r),t.conn.stream("MiniTicker","3").subscribe({next:function(e){for(let a=0;a<e.length;a++)t.liveRenewTicker(e[a])},complete:function(){console.log("streaming complete"),t.connect(e)},error:function(e){console.log(e)}}))},complete:function(){console.log("streaming complete"),t.conn.stop()},error:function(e){console.log(e)}})})})})},makeTabs:function(e){"widget"===marketsConfig.defaults.mode?this.$wrap.find(".b2bx-markets-col").append(jQuery("<ul/>",{addClass:"nav nav-tabs b2bx-markets-tabs"})):this.$wrap.find(".b2bx-markets-col").append(jQuery("<div/>",{addClass:"b2bx-wrap-title",text:marketsConfig.lang.all})),jQuery("<select/>",{addClass:"nav-select"}).appendTo(".b2bx-markets-col");let t=[];jQuery.each(e,function(e,a){switch(a.quoteAsset){case"usdc":case"usdt":t.push("USDⓈ");break;case"eth":1!==a.hidden&&t.push("ALTS");break;default:t.push(a.quoteAsset.toUpperCase())}}),t=t.filter(function(e,t,a){return a.indexOf(e)===t});for(let e=0;e<t.length;e++)marketsConfig.sortTabs[e]!==t[e]&&marketsConfig.sortTabs[e]&&(t[e]=marketsConfig.sortTabs[e]);jQuery("<option/>",{addClass:"nav-item"}).append(jQuery("<a/>",{addClass:"nav-link b2bx-markets-tabs-nav-link"+("FAV"===this.market?" active":""),text:"Favorites "}).attr("data-market","FAV").append(jQuery("<span/>",{text:marketsConfig.lang.markets}))).attr("selected","FAV"===this.market).appendTo(".nav-select");let a=this;jQuery.each(t,function(e,t){jQuery("<option/>",{addClass:"nav-item"}).append(jQuery("<a/>",{addClass:"nav-link b2bx-markets-tabs-nav-link"+(a.market===t?" active":""),text:t}).attr("data-market",t).append(jQuery("<span/>",{text:marketsConfig.lang.markets}))).attr("selected",a.market===t).appendTo(".nav-select")}),jQuery.each(t,function(e,t){jQuery("<li/>",{addClass:"nav-item"}).append(jQuery("<a/>",{addClass:"nav-link b2bx-markets-tabs-nav-link"+(this.market===t?" active":""),text:t}).attr("data-market",t).append(jQuery("<span/>",{text:marketsConfig.lang.markets}))).appendTo(".b2bx-markets-tabs")}),jQuery("<li/>",{addClass:"nav-item"}).append(jQuery("<a/>",{addClass:"nav-link b2bx-markets-tabs-nav-link b2bx-markets-tabs-nav-link-favorite"+("FAV"===this.market?" active":"")}).attr("data-market","FAV").append(jQuery("<button/>",{addClass:"b2bx-button-favorite"})).append(jQuery("<span/>",{text:marketsConfig.lang.favorites}))).prependTo(".b2bx-markets-tabs"),jQuery(".b2bx-table-thead-loading").hide(),jQuery('.b2bx-markets-tabs-nav-link[data-market="'+this.market+'"]').addClass("active")},makeTable:function(){let e=jQuery("<table/>",{id:"markets-table",addClass:"table table-hover table-sm b2bx-table b2bx-table-markets table-responsive-lg"}).append(jQuery("<thead/>").append(jQuery("<tr/>").append(jQuery("<th/>",{addClass:"fixed b2bx-table-markets-thead b2bx-table-markets-thead-pair b2bx-table-thead-favorites"})).append(jQuery("<th/>",{addClass:"fixed-2 b2bx-table-markets-thead b2bx-table-markets-thead-pair b2bx-table-thead-sorting",text:marketsConfig.lang.pair}).attr("data-sorting","pair").attr("data-position","1")).append(jQuery("<th/>",{addClass:"b2bx-table-markets-thead b2bx-table-markets-thead-coin b2bx-table-thead-sorting",text:marketsConfig.lang.coin}).attr("data-sorting","coin").attr("data-position","1")).append(jQuery("<th/>",{addClass:"b2bx-table-markets-thead b2bx-table-markets-thead-price b2bx-table-thead-sorting",text:marketsConfig.lang.price}).attr("data-sorting","price").attr("data-position","1")).append(jQuery("<th/>",{addClass:"b2bx-table-markets-thead b2bx-table-markets-thead-spread b2bx-table-thead-sorting text-right",text:marketsConfig.lang.spread}).attr("data-sorting","spread").attr("data-position","1")).append(jQuery("<th/>",{addClass:"b2bx-table-markets-thead b2bx-table-markets-thead-change b2bx-table-thead-sorting text-right",text:marketsConfig.lang.change}).attr("data-sorting","change").attr("data-position","1")).append(jQuery("<th/>",{addClass:"b2bx-table-markets-thead b2bx-table-markets-thead-high b2bx-table-thead-sorting text-right",text:marketsConfig.lang.high}).attr("data-sorting","high").attr("data-position","1")).append(jQuery("<th/>",{addClass:"b2bx-table-markets-thead b2bx-table-markets-thead-low b2bx-table-thead-sorting text-right",text:marketsConfig.lang.low}).attr("data-sorting","low").attr("data-position","1")).append(jQuery("<th/>",{addClass:"b2bx-table-markets-thead b2bx-table-markets-thead-volume b2bx-table-thead-sorting text-right",text:marketsConfig.lang.volume}).attr("data-sorting","volume").attr("data-position","1"))).append(jQuery("<tr/>",{addClass:"b2bx-table-thead-result bg-light"}).append(jQuery("<td/>",{text:marketsConfig.lang.result}).attr("colspan","9"))).append(jQuery("<tr/>",{addClass:"b2bx-table-thead-loading bg-light"}).append(jQuery("<td/>",{addClass:"blink",text:marketsConfig.lang.loading}).attr("colspan","9")))).append(jQuery("<tbody/>"));jQuery("<div/>",{addClass:"b2bx-wrap"}).append(jQuery("<div/>",{addClass:"content"}).append(jQuery("<div/>",{addClass:"row"}).append(jQuery("<div/>",{addClass:"col-md-auto order-md-1"}).append(jQuery("<form/>",{addClass:"form-inline b2bx-markets-form"}).append(jQuery("<div/>",{addClass:"form-group ml-auto"}).append(jQuery("<label/>",{addClass:"b2bx-markets-counter text-muted my-1 mr-sm-2"}).attr("for","b2bx-table-markets-search")).append(jQuery("<input/>",{id:"b2bx-table-markets-search",addClass:"b2bx-markets-search form-control"}).attr("type","text").attr("placeholder",marketsConfig.lang.search))))).append(jQuery("<div/>",{addClass:"col-md order-md-0 b2bx-markets-col"}))).append(jQuery("<div/>",{addClass:"overflow-x"}).append(e))).appendTo(this.$wrap),setTimeout(function(){sortTable(document.querySelector('[data-sorting="'+marketsConfig.defaults.sorting+'"]'),!0)},3e3)},liveRenewTicker:function(e){let t,a=100*(e.close/e.open-1),r=jQuery('[data-pair="'+e.instrument+'"]').parents("tr"),n=jQuery('.b2bx-subhead-price-row-item[data-table="'+r.data("table")+'"]');if("USDⓈ"===r.data("market")&&r.find("[data-price]").attr("data-price")||"USD"===r.data("market")&&r.find("[data-price]").attr("data-price"))t=(e.volume*r.find("[data-price]").attr("data-price")).toFixed(4);else if(r.find("[data-price]").attr("data-price")){let a=jQuery('[data-symbol="'+r.attr("data-symbol")+'"]');t=(e.volume*a.find("[data-price]").attr("data-price")).toFixed(4)}t?r.find("[data-volume]").html(t):r.find("[data-volume]").html(e.volume*r.find("[data-price]").attr("data-price")),r.find("[data-volume]").attr("data-volume",t),r.find("[data-high]").html(e.high),r.find("[data-high]").attr("data-high",e.high),r.find("[data-low]").html(e.low),r.find("[data-low]").attr("data-high",e.low),0===a||isNaN(a)||(r.find("[data-change]").addClass(1===Math.sign(a)?"text-success":"text-danger"),n.find(".b2bx-subhead-price-row-item-price").html(a.toFixed(2)+"%"),n.find(".b2bx-subhead-price-row-item-price").addClass(1===Math.sign(a)?"text-success":"text-danger")),r.find("[data-change]").html(1===Math.sign(a)?"+ "+a.toFixed(2)+"%":a.toFixed(2)+"%"),r.find("[data-change]").attr("data-change",a)},liveRenewBookSpread:function(e,t){let a=jQuery('[data-pair="'+e+'"]').parents("tr");a.find("[data-spread]").html(t.toFixed(7)),a.find("[data-spread]").attr("data-spread",t)},liveRenewBookPrice:function(e,t){let a=jQuery('[data-pair="'+e+'"]').parents("tr");if(t){a.find("[data-price]").html(t.toFixed(6)+"<span> / "+marketsConfig.lang.symbol+t.toFixed(3)+"</span>");let e=jQuery('.b2bx-subhead-price-row-item[data-table="'+a.data("table")+'"]');t.toFixed(3)&&e.find(".b2bx-subhead-price-row-item-fiat").html(marketsConfig.lang.symbol+t.toFixed(3))}a.find("[data-price]").attr("data-price",t)},setData:function(e){for(let t=0;t<e.length;t++)this.data.push(e[t])},hideEmptyMarkets:function(){let e=jQuery("#markets-table");jQuery(".b2bx-markets-tabs .b2bx-markets-tabs-nav-link").each(function(t,a){let r=jQuery(a).data("market");if("FAV"!==r){0===e.find("[data-market="+r+"]").length&&jQuery(".b2bx-markets-tabs [data-market="+r+"]").hide()}})},addTopWidgetRows:function(){jQuery.each(marketsConfig.price,function(e,t){let a=jQuery('[data-table="'+t.pair+'"]').find("[data-pair]").text();jQuery("<div/>",{addClass:"liquidity-widget__item col b2bx-subhead-price-row-item item"}).attr("data-table",t.pair).append(jQuery("<div/>",{addClass:"liquidity-widget__currency b2bx-subhead-price-row-item-pair",text:a})).append(jQuery("<div/>",{addClass:"liquidity-widget__price b2bx-subhead-price-row-item-fiat",text:""})).append(jQuery("<div/>",{addClass:"liquidity-widget__percents b2bx-subhead-price-row-item-price color-white",text:""})).appendTo(".b2bx-subhead-price .b2bx-subhead-price-row-items")})},addRows:function(e,t){let a,r,n=this;if(Object.keys(e).map(function(i,s){if(1!==e[i].hidden){for(let n=0;n<t.length;n++)if(0===i.indexOf(t[n].id))switch(a=t[n].asset_name,e[i].quoteAsset){case"usdc":case"usdt":r="USDⓈ";break;case"eth":r="ALTS";break;default:r=e[i].quoteAsset.toUpperCase()}let o=-1===favorites.indexOf(parseInt(s,10))?" ":" b2bx-table-tbody-row-favorite",d=marketsConfig.defaults.market===r||"widget"!==marketsConfig.defaults.mode?" ":" b2bx-table-tbody-row-hide";n.$wrap.find("table").append(jQuery("<tr/>",{addClass:"b2bx-table-tbody-row"+o+d}).attr("data-table",s).attr("data-market",r).attr("data-symbol",i.toUpperCase().split("_")[0]).append(jQuery("<td/>",{addClass:"b2bx-table-tbody-col-favorite text-center fixed"}).append(jQuery("<button/>",{addClass:"b2bx-button-favorite"}).attr("data-instrument",s)),jQuery("<td/>",{addClass:"fixed-2",text:i.toUpperCase().replace("_","/")}).attr("data-pair",i),jQuery("<td/>",{text:a}).attr("data-coin",a),jQuery("<td/>",{text:" "}).attr("data-price","").append(jQuery("<span/>",{text:" / "+marketsConfig.lang.symbol+" "})),jQuery("<td/>",{addClass:"text-right",text:" "}).attr("data-spread"," "),jQuery("<td/>",{addClass:"text-right",text:""}).attr("data-change",""),jQuery("<td/>",{addClass:"text-right",text:""}).attr("data-high",""),jQuery("<td/>",{addClass:"text-right",text:""}).attr("data-low",""),jQuery("<td/>",{addClass:"text-right",text:""}).attr("data-volume","").attr("data-rolling","")))}}),"FAV"===this.market){0===jQuery(".b2bx-table-markets tbody tr.b2bx-table-tbody-row-favorite").length&&jQuery(".b2bx-table-thead-result").show()}}},webStorage=window.localStorage||{},favorites=webStorage.getItem("favorites")?JSON.parse(localStorage.getItem("favorites")):[],market=webStorage.getItem("market")||marketModule.market;function sortTable(e,t=!1){if(!e)return!1;let a=jQuery(e).parents("table").eq(0),r=a.find("tr:gt(0)").toArray().sort(comparer(jQuery(e).index()));t||(e.asc=!e.asc),e.asc||(r=r.reverse());for(let e=0;e<r.length;e++)a.append(r[e])}function comparer(e){return function(t,a){let r=getCellValue(t,e),n=getCellValue(a,e);return jQuery.isNumeric(r)&&jQuery.isNumeric(n)?r-n:r.toString().localeCompare(n)}}function getCellValue(e,t){return jQuery(e).children("td").eq(t).text()}function removeItems(e,t){for(let a=0;a<t;a++)e.pop()}function mapOrder(e,t,a){return e.sort(function(e,r){var n=e[a],i=r[a];return t.indexOf(n)>t.indexOf(i)?1:-1}),e}Number.prototype.format=function(e,t,a,r){let n="\\d(?=(\\d{"+(t||3)+"})+"+(e>0?"\\D":"$")+")",i=this.toFixed(Math.max(0,~~e));return(r?i.replace(".",r):i).replace(new RegExp(n,"g"),"$&"+(a||","))},jQuery(document).on("keyup",".b2bx-markets-search",function(){let e=jQuery(this).val().replace(/ /g,"'):containsi('");jQuery.extend(jQuery.expr[":"],{containsi:function(e,t,a,r){return(e.textContent||e.innerText||"").toLowerCase().indexOf((a[3]||"").toLowerCase())>=0}}),jQuery(".b2bx-table-markets tbody tr").not(":containsi('"+e+"')").each(function(e){jQuery(this).attr("visible","false")}),jQuery(".b2bx-table-markets tbody tr:containsi('"+e+"')").each(function(e){jQuery(this).attr("visible","true")});let t=jQuery(".b2bx-table-markets tbody tr:not(.b2bx-table-tbody-row-hide)[visible='true']").length;jQuery(".b2bx-markets-counter").text(t+" "+marketsConfig.lang.item),"0"==t?jQuery(".b2bx-table-thead-result").show():jQuery(".b2bx-table-thead-result").hide()}),jQuery(document).on("change",".nav-select",function(){let e,t=jQuery("option:selected",this),a=jQuery(".b2bx-markets-search").val().length;jQuery(".b2bx-table-markets tbody tr").addClass("b2bx-table-tbody-row-hide"),"FAV"===(market=t.find("a").data("market"))?(jQuery(".b2bx-table-markets tbody tr.b2bx-table-tbody-row-favorite").removeClass("b2bx-table-tbody-row-hide"),e=jQuery(".b2bx-table-markets tbody tr.b2bx-table-tbody-row-favorite"+(a>0?"[visible='true']":"")).length):(jQuery(".b2bx-table-markets tbody tr[data-market='"+market+"']").removeClass("b2bx-table-tbody-row-hide"),e=jQuery(".b2bx-table-markets tbody tr[data-market='"+market+"']"+(a>0?"[visible='true']":"")).length),jQuery(".b2bx-markets-counter").text(e+" "+marketsConfig.lang.item),"0"===e?jQuery(".b2bx-table-thead-result").show():jQuery(".b2bx-table-thead-result").hide();try{webStorage.setItem("market",market)}catch(e){}}),jQuery(document).on("click",".b2bx-markets-tabs-nav-link",function(){let e,t=jQuery(".b2bx-markets-search").val().length;jQuery(".b2bx-markets-tabs li a.active").removeClass("active"),jQuery(this).addClass("active"),jQuery(".b2bx-table-markets tbody tr").addClass("b2bx-table-tbody-row-hide"),"FAV"===(market=jQuery(this).data("market"))?(jQuery(".b2bx-table-markets tbody tr.b2bx-table-tbody-row-favorite").removeClass("b2bx-table-tbody-row-hide"),e=jQuery(".b2bx-table-markets tbody tr.b2bx-table-tbody-row-favorite"+(t>0?"[visible='true']":"")).length):(jQuery(".b2bx-table-markets tbody tr[data-market='"+market+"']").removeClass("b2bx-table-tbody-row-hide"),e=jQuery(".b2bx-table-markets tbody tr[data-market='"+market+"']"+(t>0?"[visible='true']":"")).length),jQuery(".b2bx-markets-counter").text(e+" "+marketsConfig.lang.item),"0"===e?jQuery(".b2bx-table-thead-result").show():jQuery(".b2bx-table-thead-result").hide();try{webStorage.setItem("market",market)}catch(e){}}),jQuery(document).on("click",".b2bx-table-markets tbody tr",function(e){if(void 0!==marketsConfig.defaults.exchange){try{webStorage.SessionInstrumentId=jQuery(this).data("table"),webStorage.SessionPair=jQuery(this).find("td[data-pair]").data("pair")}catch(e){}window.open(marketsConfig.defaults.exchange,"_blank")}}).on("click",".b2bx-button-favorite",function(e){e.stopPropagation();let t=jQuery(this).data("instrument"),a=favorites.indexOf(t),r=jQuery(this).parents(".b2bx-table-tbody-row");if(-1!==a){if(favorites.splice(a,1),r.removeClass("b2bx-table-tbody-row-favorite"),"FAV"==market&&"widget"==marketsConfig.defaults.mode){r.addClass("b2bx-table-tbody-row-hide"),"0"==jQuery(".b2bx-table-markets tbody tr.b2bx-table-tbody-row-favorite").length&&jQuery(".b2bx-table-thead-result").show()}}else favorites.push(t),r.addClass("b2bx-table-tbody-row-favorite");try{webStorage.setItem("favorites",JSON.stringify(favorites))}catch(e){}}),jQuery(document).on("click",".b2bx-table-thead-sorting",function(){sortTable(this),marketsConfig.defaults.sorting=jQuery(this).data("sorting")});